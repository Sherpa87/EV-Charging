#!/bin/bash
# Check for URL expiration
now=$(date +%s)
expires=1712196108
if (( $now > $expires )); then
    echo "URLs have expired."
   exit
fi
# Check for wget/curl
if hash wget 2>/dev/null; then
    program="wget -O"
elif hash curl 2>/dev/null; then
    program="curl -o"
else
    echo "Could not find wget or curl."
    exit
fi

# Download files one by one
if [ ! -f evwatts.public.connector.csv ]; then
$program "evwatts.public.connector.csv" "https://livewire-data.s3.amazonaws.com/evwatts/evwatts.public/connector/evwatts.public.connector.csv?response-content-disposition=%27attachment%3B%20filename%3D%22evwatts.public.connector.csv%22%3B%27&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ASIA24DU6O2GJQMJRHBR%2F20240328%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240328T020148Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Security-Token=IQoJb3JpZ2luX2VjELL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIDo7jd7PIrfJmisgswL%2BSjmRDln%2B0wLHiKCnZn%2BuduhKAiBeG53kji30RDvwKenSGoipYx7MOEB7WsVaLDyatJRD%2FSqDAwjL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAQaDDc0NzU2OTU3NTU2NCIM6RvbfC2BlzRE5ADFKtcCKdeRP6RRPfLAx8yDRExVDOffSwZSmJf4OvbKPcp3aNpuNgjgdf0Js%2FpfadHRoC0ZF63vX7KD6DNKnYeso1ls9hX6d77mnuA1tPZlH2R1RpWeDwYVJoFoG6MrwtfOJuCvVqJTppnGIDjcfV8nOcOFFkyT%2FN4jXz8QsgmpphQQFIp6QPkaqT2rGQkJ5fWq8NVSjo65obVIkWg%2BV4aMGSUpNIavHro4yp58AGH5VrlQUc8QSTSCmlmB52lwa6vXYq82RvRZrvzfXsFAN0tclLueF8MhUteQm72ZQDg8glVMTVYr6YXnKbS6LkXrIpMDWYWrF7lrkLK2XLGOWy05qxp87i80BVHHxBBQrKkf2%2BROCj64HggsigDjowoVK1GpuEQ1x4vD1Gh%2F%2B9P%2BFjZAhZZVWey8HTL6MVu9oNGslG7%2BYYqzJnbNOxH9KnQfmJxhxAJmIVFON66F8jCznpOwBjqfAeG93FNAd3DEHtsd1Nk2SvqEYlA63ZGp4qLZkfmQ7aMUuIBvROXQPh%2Bd8Vrn%2F1sRGeqyt2w2z80ze35bC1EtWrh5xRTUZ8X%2FsgsbQGLsU5toaCYau%2BXNQ4BOqWDq91bSXoBuowJf6zHPkLXDMvs%2BqXOMGEBD5a5bbMbwvKnMWdjngy%2BX%2FDkZBVjgQmEyEEu9u1zYWMFu5Tsg7trq5CXMZg%3D%3D&X-Amz-Signature=4d65b8ba451b4ebbd15346a20d5ac330582e59be11bd716675a92f4476ba8518"
fi
if [ ! -f evwatts.public.dictionary.txt ]; then
$program "evwatts.public.dictionary.txt" "https://livewire-data.s3.amazonaws.com/evwatts/evwatts.public/dictionary/evwatts.public.dictionary.txt?response-content-disposition=%27attachment%3B%20filename%3D%22evwatts.public.dictionary.txt%22%3B%27&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ASIA24DU6O2GJQMJRHBR%2F20240328%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240328T020148Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Security-Token=IQoJb3JpZ2luX2VjELL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIDo7jd7PIrfJmisgswL%2BSjmRDln%2B0wLHiKCnZn%2BuduhKAiBeG53kji30RDvwKenSGoipYx7MOEB7WsVaLDyatJRD%2FSqDAwjL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAQaDDc0NzU2OTU3NTU2NCIM6RvbfC2BlzRE5ADFKtcCKdeRP6RRPfLAx8yDRExVDOffSwZSmJf4OvbKPcp3aNpuNgjgdf0Js%2FpfadHRoC0ZF63vX7KD6DNKnYeso1ls9hX6d77mnuA1tPZlH2R1RpWeDwYVJoFoG6MrwtfOJuCvVqJTppnGIDjcfV8nOcOFFkyT%2FN4jXz8QsgmpphQQFIp6QPkaqT2rGQkJ5fWq8NVSjo65obVIkWg%2BV4aMGSUpNIavHro4yp58AGH5VrlQUc8QSTSCmlmB52lwa6vXYq82RvRZrvzfXsFAN0tclLueF8MhUteQm72ZQDg8glVMTVYr6YXnKbS6LkXrIpMDWYWrF7lrkLK2XLGOWy05qxp87i80BVHHxBBQrKkf2%2BROCj64HggsigDjowoVK1GpuEQ1x4vD1Gh%2F%2B9P%2BFjZAhZZVWey8HTL6MVu9oNGslG7%2BYYqzJnbNOxH9KnQfmJxhxAJmIVFON66F8jCznpOwBjqfAeG93FNAd3DEHtsd1Nk2SvqEYlA63ZGp4qLZkfmQ7aMUuIBvROXQPh%2Bd8Vrn%2F1sRGeqyt2w2z80ze35bC1EtWrh5xRTUZ8X%2FsgsbQGLsU5toaCYau%2BXNQ4BOqWDq91bSXoBuowJf6zHPkLXDMvs%2BqXOMGEBD5a5bbMbwvKnMWdjngy%2BX%2FDkZBVjgQmEyEEu9u1zYWMFu5Tsg7trq5CXMZg%3D%3D&X-Amz-Signature=6e3928e623fd25703dd3a035933ea899e0fa6c68eb589abe099edb74cc1594a1"
fi
if [ ! -f evwatts.public.evse.csv ]; then
$program "evwatts.public.evse.csv" "https://livewire-data.s3.amazonaws.com/evwatts/evwatts.public/evse/evwatts.public.evse.csv?response-content-disposition=%27attachment%3B%20filename%3D%22evwatts.public.evse.csv%22%3B%27&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ASIA24DU6O2GJQMJRHBR%2F20240328%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240328T020148Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Security-Token=IQoJb3JpZ2luX2VjELL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIDo7jd7PIrfJmisgswL%2BSjmRDln%2B0wLHiKCnZn%2BuduhKAiBeG53kji30RDvwKenSGoipYx7MOEB7WsVaLDyatJRD%2FSqDAwjL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAQaDDc0NzU2OTU3NTU2NCIM6RvbfC2BlzRE5ADFKtcCKdeRP6RRPfLAx8yDRExVDOffSwZSmJf4OvbKPcp3aNpuNgjgdf0Js%2FpfadHRoC0ZF63vX7KD6DNKnYeso1ls9hX6d77mnuA1tPZlH2R1RpWeDwYVJoFoG6MrwtfOJuCvVqJTppnGIDjcfV8nOcOFFkyT%2FN4jXz8QsgmpphQQFIp6QPkaqT2rGQkJ5fWq8NVSjo65obVIkWg%2BV4aMGSUpNIavHro4yp58AGH5VrlQUc8QSTSCmlmB52lwa6vXYq82RvRZrvzfXsFAN0tclLueF8MhUteQm72ZQDg8glVMTVYr6YXnKbS6LkXrIpMDWYWrF7lrkLK2XLGOWy05qxp87i80BVHHxBBQrKkf2%2BROCj64HggsigDjowoVK1GpuEQ1x4vD1Gh%2F%2B9P%2BFjZAhZZVWey8HTL6MVu9oNGslG7%2BYYqzJnbNOxH9KnQfmJxhxAJmIVFON66F8jCznpOwBjqfAeG93FNAd3DEHtsd1Nk2SvqEYlA63ZGp4qLZkfmQ7aMUuIBvROXQPh%2Bd8Vrn%2F1sRGeqyt2w2z80ze35bC1EtWrh5xRTUZ8X%2FsgsbQGLsU5toaCYau%2BXNQ4BOqWDq91bSXoBuowJf6zHPkLXDMvs%2BqXOMGEBD5a5bbMbwvKnMWdjngy%2BX%2FDkZBVjgQmEyEEu9u1zYWMFu5Tsg7trq5CXMZg%3D%3D&X-Amz-Signature=4567819f74c61e07d4c591d404ae9b818375cbfb8fc14ec36ec40c7fe613562a"
fi
if [ ! -f evwatts.public.session.csv ]; then
$program "evwatts.public.session.csv" "https://livewire-data.s3.amazonaws.com/evwatts/evwatts.public/session/evwatts.public.session.csv?response-content-disposition=%27attachment%3B%20filename%3D%22evwatts.public.session.csv%22%3B%27&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ASIA24DU6O2GJQMJRHBR%2F20240328%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20240328T020148Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Security-Token=IQoJb3JpZ2luX2VjELL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIDo7jd7PIrfJmisgswL%2BSjmRDln%2B0wLHiKCnZn%2BuduhKAiBeG53kji30RDvwKenSGoipYx7MOEB7WsVaLDyatJRD%2FSqDAwjL%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAQaDDc0NzU2OTU3NTU2NCIM6RvbfC2BlzRE5ADFKtcCKdeRP6RRPfLAx8yDRExVDOffSwZSmJf4OvbKPcp3aNpuNgjgdf0Js%2FpfadHRoC0ZF63vX7KD6DNKnYeso1ls9hX6d77mnuA1tPZlH2R1RpWeDwYVJoFoG6MrwtfOJuCvVqJTppnGIDjcfV8nOcOFFkyT%2FN4jXz8QsgmpphQQFIp6QPkaqT2rGQkJ5fWq8NVSjo65obVIkWg%2BV4aMGSUpNIavHro4yp58AGH5VrlQUc8QSTSCmlmB52lwa6vXYq82RvRZrvzfXsFAN0tclLueF8MhUteQm72ZQDg8glVMTVYr6YXnKbS6LkXrIpMDWYWrF7lrkLK2XLGOWy05qxp87i80BVHHxBBQrKkf2%2BROCj64HggsigDjowoVK1GpuEQ1x4vD1Gh%2F%2B9P%2BFjZAhZZVWey8HTL6MVu9oNGslG7%2BYYqzJnbNOxH9KnQfmJxhxAJmIVFON66F8jCznpOwBjqfAeG93FNAd3DEHtsd1Nk2SvqEYlA63ZGp4qLZkfmQ7aMUuIBvROXQPh%2Bd8Vrn%2F1sRGeqyt2w2z80ze35bC1EtWrh5xRTUZ8X%2FsgsbQGLsU5toaCYau%2BXNQ4BOqWDq91bSXoBuowJf6zHPkLXDMvs%2BqXOMGEBD5a5bbMbwvKnMWdjngy%2BX%2FDkZBVjgQmEyEEu9u1zYWMFu5Tsg7trq5CXMZg%3D%3D&X-Amz-Signature=70618efd106bd0040fde8a9c656d54009ee32adc6b396a2d45fb4609599293a8"
fi
